# Інструкція з Розгортання Інформаційної Системи Рахування КБЖУ у Production Середовищі

Цей документ створений спеціально для вас,Борисе Олеговичу, містить детальні інструкції для фахівців з релізу або DevOps щодо розгортання Інформаційної Системи Рахування КБЖУ у виробничому (production) середовищі. Додаток є клієнтським веб-додатком (HTML, CSS, JavaScript), що спрощує процес деплою, оскільки не вимагає складних серверних компонентів або налаштувань баз даних.

## 1. Огляд Архітектури Додатку

Інформаційна Система Рахування КБЖУ функціонує повністю на стороні клієнта (у веб-браузері користувача). Сервер виконує лише функцію хостингу статичних файлів (HTML, CSS, JavaScript, зображення тощо). Опціонально, передбачена функція відправки логів помилок на серверний ендпоінт, який повинен бути налаштований окремо.

## 2. Вимоги до Апаратного Забезпечення

Вимоги до серверного обладнання для хостингу статичного контенту є мінімальними.

* **Архітектура Процесора:** Будь-яка сучасна архітектура (x86, x64, ARM) сумісна з операційною системою та веб-сервером.
* **Центральний Процесор (CPU):** Мінімальні вимоги (наприклад, 1 ядро). Навантаження на CPU сервера буде незначним, оскільки основні обчислення відбуваються у браузері клієнта.
* **Оперативна Пам'ять (RAM):** 512 MB або більше. Цього обсягу достатньо для операційної системи та веб-сервера.
* **Дисковий Простір (Storage):** Мінімум 1 GB вільного місця. Розмір самого додатку становить кілька мегабайт; решта простору необхідна для операційної системи, веб-сервера та системних логів.

## 3. Необхідне Програмне Забезпечення

* **Операційна Система:** Рекомендується будь-яка стабільна серверна дистрибуція Linux (наприклад, Ubuntu Server, Debian, CentOS, AlmaLinux) або Windows Server.
* **Веб-сервер:**
    * **Nginx (рекомендовано):** Високопродуктивний та ефективний для обслуговування статичного контенту.
    * **Apache HTTP Server:** Популярний та надійний вибір, також підходить для цієї задачі.
    * **Інші:** Будь-який веб-сервер, здатний ефективно віддавати статичні файли.
* **Git:** Необхідний для клонування репозиторію та оновлення коду на сервері.

## 4. Налаштування Мережі

* **Порти:** Веб-сервер повинен бути доступний через стандартні порти HTTP (80) та/або HTTPS (443).
* **Фаєрвол:** Переконайтесь, що відповідні порти (80, 443) відкриті для вхідних з'єднань на сервері.
    * **Приклад для `ufw` (Ubuntu):**
        ```bash
        sudo ufw allow 'Nginx HTTP'
        sudo ufw allow 'Nginx HTTPS'
        sudo ufw enable
        ```
* **DNS-запис:** Налаштуйте DNS-запис (A-запис) для вашого домену, щоб він вказував на публічну IP-адресу сервера.

## 5. Конфігурація Веб-сервера (Приклад для Nginx)

1.  **Встановлення Nginx:**
    ```bash
    sudo apt update
    sudo apt install nginx -y
    ```
    (Адаптуйте команду під ваш дистрибутив ОС).

2.  **Створення конфігураційного файлу Virtual Host:**
    Створіть новий файл конфігурації для вашого сайту в директорії `sites-available`:
    ```bash
    sudo nano /etc/nginx/sites-available/kbsu-system.conf
    ```
    Вставте наступний вміст, замінивши `your_domain.com` на ваш домен:
    ```nginx
    server {
        listen 80;
        server_name your_domain.com www.your_domain.com; # Замініть на ваш домен

        root /var/www/kbsu-system; # Шлях до директорії з файлами проєкту
        index index.html index.htm;

        location / {
            try_files $uri $uri/ =404;
        }

        # Опціональна конфігурація для проксі-сервера логування:
        # Якщо використовується серверний ендпоінт для логування, розкоментуйте та налаштуйте
        # location /api/log_error {
        #     proxy_pass http://localhost:8080/api/log_error; # Замініть на реальну адресу вашого лог-сервера
        #     proxy_set_header Host $host;
        #     proxy_set_header X-Real-IP $remote_addr;
        #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        # }
    }
    ```

3.  **Активація конфігурації:**
    Створіть символічне посилання з `sites-available` на `sites-enabled`:
    ```bash
    sudo ln -s /etc/nginx/sites-available/kbsu-system.conf /etc/nginx/sites-enabled/
    ```
    Видаліть дефолтну конфігурацію, якщо вона існує:
    ```bash
    sudo rm /etc/nginx/sites-enabled/default
    ```

4.  **Перевірка синтаксису та перезапуск Nginx:**
    ```bash
    sudo nginx -t
    sudo systemctl restart nginx
    ```
    Переконайтеся у відсутності помилок після перевірки синтаксису.

5.  **Налаштування HTTPS (рекомендовано):**
    Для забезпечення безпечного з'єднання використовуйте Certbot для отримання та автоматичного оновлення SSL-сертифікатів від Let's Encrypt.
    ```bash
    sudo apt install certbot python3-certbot-nginx -y
    sudo certbot --nginx -d your_domain.com -d www.your_domain.com
    ```
    Дотримуйтесь інструкцій, наданих Certbot.

## 6. Розгортання Коду

1.  **Створення директорії для проєкту:**
    ```bash
    sudo mkdir -p /var/www/kbsu-system
    sudo chown -R $USER:$USER /var/www/kbsu-system # Призначте права власнику, який буде розгортати код
    ```

2.  **Клонування репозиторію:**
    Перейдіть до створеної директорії та клонуйте вихідний код проєкту.
    ```bash
    cd /var/www/kbsu-system
    git clone [https://github.com/eugene22202/eugene22202-software-technical-support.git](https://github.com/eugene22202/eugene22202-software-technical-support.git) .
    ```
    (Зверніть увагу на крапку `.` в кінці, яка вказує на клонування вмісту репозиторію безпосередньо в поточну директорію). Забезпечте відповідні облікові дані Git, якщо репозиторій приватний.

3.  **Оновлення коду (при випуску нової версії):**
    Для оновлення розгорнутого додатку просто перейдіть до директорії `/var/www/kbsu-system` та виконайте команду `git pull`:
    ```bash
    cd /var/www/kbsu-system
    git pull origin main # Або назва цільової гілки
    ```
    Якщо проєкт передбачає кроки збірки (наприклад, мініфікація, бандлінг), ці кроки повинні бути виконані перед переміщенням файлів до `/var/www/kbsu-system` або інтегровані в CI/CD пайплайн. Даний проєкт не вимагає попередньої компіляції.

## 7. Перевірка Працездатності

Після виконання всіх кроків розгортання, проведіть наступні перевірки для підтвердження коректної роботи системи:

1.  **Доступ до Веб-додатку:** Відкрийте в браузері URL вашого домену (`http://your_domain.com` або `https://your_domain.com`). Має відобразитись головна сторінка Інформаційної Системи Рахування КБЖУ.
2.  **Перевірка Консолі Браузера:** Відкрийте інструменти розробника (зазвичай F12) та перевірте вкладку "Console" на відсутність JavaScript-помилок.
3.  **Тестування Функціоналу:**
    * Проведіть розрахунок калорій, ввівши параметри та натиснувши кнопку "START". Перевірте коректність відображення результату.
    * Згенеруйте план харчування, вказавши необхідні параметри та натиснувши "START". Перевірте відображення детального раціону.
4.  **Аналіз Логів Веб-сервера:** Перегляньте логи веб-сервера (наприклад, для Nginx це `/var/log/nginx/access.log` та `/var/log/nginx/error.log`) на предмет помилок HTTP (4xx, 5xx) або інших аномалій.
5.  **Перевірка Системи Логування (якщо налаштовано):** Якщо ви налаштували серверний ендпоінт для логування клієнтських помилок, перевірте, чи коректно надходять логі рівня `warn` та `error` на ваш лог-сервер.

Успішне проходження цих перевірок підтверджує коректне функціонування Інформаційної Системи Рахування КБЖУ у production середовищі.